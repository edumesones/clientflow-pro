{"ast":null,"code":"import React,{useEffect,useState}from'react';import StatCard from'../components/StatCard';import{dashboardAPI}from'../services/apiService';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[stats,setStats]=useState(null);const[upcoming,setUpcoming]=useState([]);const[recentLeads,setRecentLeads]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const[statsRes,upcomingRes,leadsRes]=await Promise.all([dashboardAPI.getStats(),dashboardAPI.getUpcoming(5),dashboardAPI.getRecentLeads(5)]);setStats(statsRes.data);setUpcoming(upcomingRes.data);setRecentLeads(leadsRes.data);}catch(error){console.error('Error fetching dashboard:',error);}finally{setLoading(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Cargando...\"});const getStatusBadge=status=>{const statusMap={'pending':{class:'status-pending',label:'Pendiente'},'confirmed':{class:'status-confirmed',label:'Confirmada'},'completed':{class:'status-completed',label:'Completada'},'cancelled':{class:'status-cancelled',label:'Cancelada'},'no_show':{class:'status-noshow',label:'No asisti√≥'}};const statusInfo=statusMap[status]||{class:'',label:status};return/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(statusInfo.class),children:statusInfo.label});};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Leads\",value:(stats===null||stats===void 0?void 0:stats.total_leads)||0,change:\"+12%\",changeType:\"positive\",icon:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Citas este mes\",value:(stats===null||stats===void 0?void 0:stats.total_appointments)||0,change:\"+5%\",changeType:\"positive\",icon:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Tasa de conversi\\xF3n\",value:\"\".concat((stats===null||stats===void 0?void 0:stats.conversion_rate)||0,\"%\"),change:\"+2%\",changeType:\"positive\",icon:\"\\uD83D\\uDCC8\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Ingresos\",value:\"$\".concat((stats===null||stats===void 0?void 0:stats.revenue_this_month)||0),change:(stats===null||stats===void 0?void 0:stats.revenue_this_month)>(stats===null||stats===void 0?void 0:stats.revenue_last_month)?'+8%':'-3%',changeType:(stats===null||stats===void 0?void 0:stats.revenue_this_month)>(stats===null||stats===void 0?void 0:stats.revenue_last_month)?'positive':'negative',icon:\"\\uD83D\\uDCB0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Pr\\xF3ximas citas\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/admin/calendar\",className:\"view-all\",children:\"Ver todas\"})]}),upcoming.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-state\",children:\"No hay citas pr\\xF3ximas\"}):/*#__PURE__*/_jsx(\"div\",{className:\"appointments-list\",children:upcoming.map(appt=>/*#__PURE__*/_jsxs(\"div\",{className:\"appointment-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"appointment-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:appt.client_name}),/*#__PURE__*/_jsx(\"p\",{children:appt.service_type||'Consulta general'}),/*#__PURE__*/_jsxs(\"span\",{className:\"appointment-date\",children:[appt.appointment_date,\" \\u2022 \",appt.start_time]})]}),getStatusBadge(appt.status)]},appt.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Leads recientes\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/admin/leads\",className:\"view-all\",children:\"Ver todos\"})]}),recentLeads.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-state\",children:\"No hay leads recientes\"}):/*#__PURE__*/_jsx(\"div\",{className:\"leads-list\",children:recentLeads.map(lead=>/*#__PURE__*/_jsxs(\"div\",{className:\"lead-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lead-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:lead.name}),/*#__PURE__*/_jsx(\"p\",{children:lead.email})]}),/*#__PURE__*/_jsx(\"span\",{className:\"lead-status status-\".concat(lead.status),children:lead.status})]},lead.id))})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","StatCard","dashboardAPI","jsx","_jsx","jsxs","_jsxs","Dashboard","stats","setStats","upcoming","setUpcoming","recentLeads","setRecentLeads","loading","setLoading","fetchDashboardData","statsRes","upcomingRes","leadsRes","Promise","all","getStats","getUpcoming","getRecentLeads","data","error","console","className","children","getStatusBadge","status","statusMap","class","label","statusInfo","concat","title","value","total_leads","change","changeType","icon","total_appointments","conversion_rate","revenue_this_month","revenue_last_month","href","length","map","appt","client_name","service_type","appointment_date","start_time","id","lead","name","email"],"sources":["/home/lobster/.openclaw/workspace/clientflow-pro/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport StatCard from '../components/StatCard';\nimport { dashboardAPI } from '../services/apiService';\nimport './Dashboard.css';\n\nconst Dashboard = () => {\n  const [stats, setStats] = useState(null);\n  const [upcoming, setUpcoming] = useState([]);\n  const [recentLeads, setRecentLeads] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, []);\n\n  const fetchDashboardData = async () => {\n    try {\n      const [statsRes, upcomingRes, leadsRes] = await Promise.all([\n        dashboardAPI.getStats(),\n        dashboardAPI.getUpcoming(5),\n        dashboardAPI.getRecentLeads(5),\n      ]);\n      \n      setStats(statsRes.data);\n      setUpcoming(upcomingRes.data);\n      setRecentLeads(leadsRes.data);\n    } catch (error) {\n      console.error('Error fetching dashboard:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) return <div className=\"loading\">Cargando...</div>;\n\n  const getStatusBadge = (status) => {\n    const statusMap = {\n      'pending': { class: 'status-pending', label: 'Pendiente' },\n      'confirmed': { class: 'status-confirmed', label: 'Confirmada' },\n      'completed': { class: 'status-completed', label: 'Completada' },\n      'cancelled': { class: 'status-cancelled', label: 'Cancelada' },\n      'no_show': { class: 'status-noshow', label: 'No asisti√≥' },\n    };\n    const statusInfo = statusMap[status] || { class: '', label: status };\n    return <span className={`status-badge ${statusInfo.class}`}>{statusInfo.label}</span>;\n  };\n\n  return (\n    <div className=\"dashboard\">\n      <h1>Dashboard</h1>\n      \n      {/* Stats Grid */}\n      <div className=\"stats-grid\">\n        <StatCard\n          title=\"Total Leads\"\n          value={stats?.total_leads || 0}\n          change=\"+12%\"\n          changeType=\"positive\"\n          icon=\"üéØ\"\n        />\n        <StatCard\n          title=\"Citas este mes\"\n          value={stats?.total_appointments || 0}\n          change=\"+5%\"\n          changeType=\"positive\"\n          icon=\"üìÖ\"\n        />\n        <StatCard\n          title=\"Tasa de conversi√≥n\"\n          value={`${stats?.conversion_rate || 0}%`}\n          change=\"+2%\"\n          changeType=\"positive\"\n          icon=\"üìà\"\n        />\n        <StatCard\n          title=\"Ingresos\"\n          value={`$${stats?.revenue_this_month || 0}`}\n          change={stats?.revenue_this_month > stats?.revenue_last_month ? '+8%' : '-3%'}\n          changeType={stats?.revenue_this_month > stats?.revenue_last_month ? 'positive' : 'negative'}\n          icon=\"üí∞\"\n        />\n      </div>\n\n      {/* Two Column Layout */}\n      <div className=\"dashboard-grid\">\n        {/* Upcoming Appointments */}\n        <div className=\"dashboard-card\">\n          <div className=\"card-header\">\n            <h2>Pr√≥ximas citas</h2>\n            <a href=\"/admin/calendar\" className=\"view-all\">Ver todas</a>\n          </div>\n          \n          {upcoming.length === 0 ? (\n            <p className=\"empty-state\">No hay citas pr√≥ximas</p>\n          ) : (\n            <div className=\"appointments-list\">\n              {upcoming.map((appt) => (\n                <div key={appt.id} className=\"appointment-item\">\n                  <div className=\"appointment-info\">\n                    <h4>{appt.client_name}</h4>\n                    <p>{appt.service_type || 'Consulta general'}</p>\n                    <span className=\"appointment-date\">\n                      {appt.appointment_date} ‚Ä¢ {appt.start_time}\n                    </span>\n                  </div>\n                  {getStatusBadge(appt.status)}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Recent Leads */}\n        <div className=\"dashboard-card\">\n          <div className=\"card-header\">\n            <h2>Leads recientes</h2>\n            <a href=\"/admin/leads\" className=\"view-all\">Ver todos</a>\n          </div>\n          \n          {recentLeads.length === 0 ? (\n            <p className=\"empty-state\">No hay leads recientes</p>\n          ) : (\n            <div className=\"leads-list\">\n              {recentLeads.map((lead) => (\n                <div key={lead.id} className=\"lead-item\">\n                  <div className=\"lead-info\">\n                    <h4>{lead.name}</h4>\n                    <p>{lead.email}</p>\n                  </div>\n                  <span className={`lead-status status-${lead.status}`}>\n                    {lead.status}\n                  </span>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}